<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>First Weather Map</title>
    <!-- Mapbox CSS -->
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css' rel='stylesheet' />
    <!-- Custom CSS -->

<style>
        #map {
            /* the width and height may be set to any size */
            width: 100%;
            height: 400px;
        }
</style>
</head>
<body>
<div class="Header">
    <h1>Weather App</h1>
    <div>${address}</div>
</div>
    <div id='map'></div>
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js'></script>
    <button class="weather">Get Weather Info</button>

    <script src="js/keys.js"></script>
<script>
(async function(){
            mapboxgl.accessToken = MAPBOX_API_KEY;
        var map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/streets-v9',
            zoom: 10,
            center: [-98.4916, 29.4252],
            bearing: -0
        });
        async function getLatLngFromAddress(address, token = MAPBOX_API_KEY) {
            var baseUrl = 'https://api.mapbox.com';
            var endPoint = '/geocoding/v5/mapbox.places/';
            return fetch(baseUrl + endPoint + encodeURIComponent(address) + '.json' + "?" + 'access_token=' + token)
                .then(function (response) {
                    return response.json();
                }).then(function (data) {
                    console.log(data);
                    return data.features[0].center;
                });

            let coords = await getLatLngFromAddress("Belton, TX");



            const addressInfo = document.getElementsByClassName("input1-1");
            const addressInput = document.getElementById("input1")
            addressInfo[0].addEventListener("click", async function (event) {
                let coords = await getLatLngFromAddress(addressInput.value);
            });
            const marker = new mapboxgl.Marker();
            marker.setLngLat(coords);
            marker.addTo(map);

        }

        })();
</script>
</body>
</html>
